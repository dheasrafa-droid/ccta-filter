<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Object Gallery Full</title>
  <style>
    body { background:#0f0f0f; font-family: Arial, sans-serif; color: #fff; padding: 20px; }
    h1 { text-align: center; margin-bottom: 20px; }
    .grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }
    .card {
      background: #1e1e1e; border-radius: 16px; overflow: hidden; text-align: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }
    .card-header { padding: 10px; border-bottom: 1px solid #333; font-weight: bold; }
    .preview { width: 100%; height: 220px; background: #222; }
    .card-footer { padding: 10px; border-top: 1px solid #333; }
    .btn {
      background: #00ccff; color: #111; padding: 6px 12px;
      border-radius: 8px; font-weight: bold; cursor: pointer;
    }
    .btn:hover { background: #00a3cc; }

    /* Fullscreen modal */
    #fullscreenModal {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.95);
      display: none; align-items: center; justify-content: center; flex-direction: column;
      z-index: 1000;
    }
    #fullscreenContainer {
      width: 90vw; height: 65vh; background: #111;
      border-radius: 12px; overflow: hidden;
    }
    .controls {
      display: flex; gap: 15px; margin-top: 12px;
      flex-wrap: wrap; justify-content: center; align-items: center;
    }
    .controls label { font-size: 14px; }
    input[type=color] { width: 40px; height: 40px; border-radius: 8px; border: none; }
    select, input[type=range] {
      border-radius: 8px; border: none; padding: 4px 8px; background: #222; color: #fff;
    }
    #closeBtn {
      padding: 8px 14px; border: none; border-radius: 8px;
      background: #ff3366; color: #fff; font-weight: bold; cursor: pointer;
    }
    #closeBtn:hover { background: #cc0044; }
  </style>
</head>
<body>
  <h1>3D Object Gallery</h1>
  <div class="grid">
    <div class="card">
      <div class="card-header">Cube Preview</div>
      <div class="preview" id="preview1"></div>
      <div class="card-footer"><button class="btn" onclick="openFullscreen('cube')">View More</button></div>
    </div>
    <div class="card">
      <div class="card-header">Sphere Preview</div>
      <div class="preview" id="preview2"></div>
      <div class="card-footer"><button class="btn" onclick="openFullscreen('sphere')">View More</button></div>
    </div>
    <div class="card">
      <div class="card-header">Mixed Objects</div>
      <div class="preview" id="preview3"></div>
      <div class="card-footer"><button class="btn" onclick="openFullscreen('mixed')">View More</button></div>
    </div>
  </div>

  <!-- Fullscreen Modal -->
  <div id="fullscreenModal">
    <div id="fullscreenContainer"></div>
    <div class="controls">
      <label>ðŸŽ¨ Color:</label>
      <input type="color" id="colorPicker" value="#00ccff">

      <label>ðŸª„ Material:</label>
      <select id="materialSelector">
        <option value="solid">Solid</option>
        <option value="metallic">Metallic</option>
        <option value="wireframe">Wireframe</option>
        <option value="glass">Glass</option>
      </select>

      <label>ðŸŒž Light Intensity:</label>
      <input type="range" id="lightIntensity" min="0" max="3" step="0.1" value="1">

      <label>Light X:</label>
      <input type="range" id="lightX" min="-10" max="10" step="0.5" value="5">

      <label>Light Y:</label>
      <input type="range" id="lightY" min="-10" max="10" step="0.5" value="5">

      <label>Light Z:</label>
      <input type="range" id="lightZ" min="-10" max="10" step="0.5" value="5">

      <label>ðŸŒŒ Background:</label>
      <select id="bgSelector">
        <option value="solid">Solid</option>
        <option value="gradient">Gradient</option>
        <option value="skybox">Skybox</option>
      </select>
      <input type="color" id="bgColor" value="#111111">

      <button id="closeBtn" onclick="closeFullscreen()">Close</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>
  <script>
    // ðŸ”¹ Preview Scene
    function createPreview(containerId, objectType) {
      const container = document.getElementById(containerId);
      const scene = new THREE.Scene();
      scene.background = new THREE.Color(0x222222);

      const camera = new THREE.PerspectiveCamera(50, container.clientWidth / container.clientHeight, 0.1, 1000);
      camera.position.z = 3;

      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(container.clientWidth, container.clientHeight);
      container.appendChild(renderer.domElement);

      const light = new THREE.PointLight(0xffffff, 1);
      light.position.set(3, 3, 5);
      scene.add(light);

      let object;
      if(objectType === "cube"){
        object = new THREE.Mesh(new THREE.BoxGeometry(1,1,1), new THREE.MeshStandardMaterial({ color: 0x00ffcc }));
      } else if(objectType === "sphere"){
        object = new THREE.Mesh(new THREE.SphereGeometry(0.7, 32, 32), new THREE.MeshStandardMaterial({ color: 0xff0066 }));
      } else {
        object = new THREE.Group();
        const cube = new THREE.Mesh(new THREE.BoxGeometry(0.7,0.7,0.7), new THREE.MeshStandardMaterial({ color: 0x00ffcc }));
        cube.position.x = -1;
        const sphere = new THREE.Mesh(new THREE.SphereGeometry(0.5, 32, 32), new THREE.MeshStandardMaterial({ color: 0xff0066 }));
        sphere.position.x = 1;
        object.add(cube, sphere);
      }

      scene.add(object);

      function animate() {
        requestAnimationFrame(animate);
        object.rotation.y += 0.01;
        object.rotation.x += 0.005;
        renderer.render(scene, camera);
      }
      animate();
    }

    // Buat preview kecil
    createPreview("preview1", "cube");
    createPreview("preview2", "sphere");
    createPreview("preview3", "mixed");

    // ðŸ”¹ Fullscreen Scene
    let fullscreenRenderer, fullscreenScene, fullscreenCamera, fullscreenControls, fullscreenObject, activeObjects, pointLight;

    function openFullscreen(objectType) {
      document.getElementById("fullscreenModal").style.display = "flex";

      fullscreenScene = new THREE.Scene();
      fullscreenScene.background = new THREE.Color(0x111111);
      fullscreenCamera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
      fullscreenCamera.position.z = 4;

      fullscreenRenderer = new THREE.WebGLRenderer({ antialias: true });
      fullscreenRenderer.setSize(window.innerWidth * 0.9, window.innerHeight * 0.65);
      document.getElementById("fullscreenContainer").innerHTML = "";
      document.getElementById("fullscreenContainer").appendChild(fullscreenRenderer.domElement);

      fullscreenControls = new THREE.OrbitControls(fullscreenCamera, fullscreenRenderer.domElement);
      fullscreenControls.enableDamping = true;

      // Lighting
      pointLight = new THREE.PointLight(0xffffff, 1);
      pointLight.position.set(5, 5, 5);
      fullscreenScene.add(pointLight);

      if(objectType === "cube"){
        fullscreenObject = new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshStandardMaterial({ color: 0x00ccff }));
        activeObjects = [fullscreenObject];
      } else if(objectType === "sphere"){
        fullscreenObject = new THREE.Mesh(new THREE.SphereGeometry(1, 32, 32), new THREE.MeshStandardMaterial({ color: 0xff0066 }));
        activeObjects = [fullscreenObject];
      } else {
        fullscreenObject = new THREE.Group();
        const cube = new THREE.Mesh(new THREE.BoxGeometry(1,1,1), new THREE.MeshStandardMaterial({ color: 0x00ffcc }));
        const sphere = new THREE.Mesh(new THREE.SphereGeometry(0.8, 32, 32), new THREE.MeshStandardMaterial({ color: 0xff0066 }));
        cube.position.x = -1.5; sphere.position.x = 1.5;
        fullscreenObject.add(cube, sphere);
        activeObjects = [cube, sphere];
      }
      fullscreenScene.add(fullscreenObject);

      // ðŸŽ¨ Color Picker
      document.getElementById("colorPicker").oninput = (e) => {
        activeObjects.forEach(obj => obj.material.color.set(e.target.value));
      };

      // ðŸª„ Material Selector
      document.getElementById("materialSelector").onchange = (e) => {
        const type = e.target.value;
        activeObjects.forEach(obj => {
          let col = obj.material.color.clone();
          if(type === "solid"){
            obj.material = new THREE.MeshStandardMaterial({ color: col });
          } else if(type === "metallic"){
            obj.material = new THREE.MeshStandardMaterial({ color: col, metalness: 1, roughness: 0.3 });
          } else if(type === "wireframe"){
            obj.material = new THREE.MeshBasicMaterial({ color: col, wireframe: true });
          } else if(type === "glass"){
            obj.material = new THREE.MeshPhysicalMaterial({ color: col, transparent: true, opacity: 0.5, transmission: 0.9, roughness: 0 });
          }
        });
      };

      // ðŸŒž Lighting Controls
      document.getElementById("lightIntensity").oninput = (e) => { pointLight.intensity = parseFloat(e.target.value); };
      document.getElementById("lightX").oninput = (e) => { pointLight.position.x = parseFloat(e.target.value); };
      document.getElementById("lightY").oninput = (e) => { pointLight.position.y = parseFloat(e.target.value); };
      document.getElementById("lightZ").oninput = (e) => { pointLight.position.z = parseFloat(e.target.value); };

      // ðŸŒŒ Background Control
      document.getElementById("bgSelector").onchange = (e) => {
        const type = e.target.value;

        if (type === "solid") {
          fullscreenScene.background = new THREE.Color(document.getElementById("bgColor").value);

        } else if (type === "gradient") {
          const canvas = document.createElement("canvas");
          canvas.width = 512;
          canvas.height = 512;
          const ctx = canvas.getContext("2d");

          const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
          gradient.addColorStop(0, "#1e3c72");
          gradient.addColorStop(1, "#2a5298");
          ctx.fillStyle = gradient;
          ctx.fillRect(0, 0, canvas.width, canvas.height);

          const texture = new THREE.CanvasTexture(canvas);
          fullscreenScene.background = texture;

        } else if (type === "skybox") {
          const loader = new THREE.CubeTextureLoader();
          fullscreenScene.background = loader.load([
            "https://threejs.org/examples/textures/cube/skybox/px.jpg",
            "https://threejs.org/examples/textures/cube/skybox/nx.jpg",
            "https://threejs.org/examples/textures/cube/skybox/py.jpg",
            "https://threejs.org/examples/textures/cube/skybox/ny.jpg",
            "https://threejs.org/examples/textures/cube/skybox/pz.jpg",
            "https://threejs.org/examples/textures/cube/skybox/nz.jpg",
          ]);
        }
      };

      // Solid color update realtime
      document.getElementById("bgColor").oninput = (e) => {
        if (document.getElementById("bgSelector").value === "solid") {
          fullscreenScene.background = new THREE.Color(e.target.value);
        }
      };

      function animateFullscreen() {
        requestAnimationFrame(animateFullscreen);
        fullscreenObject.rotation.y += 0.01;
        fullscreenObject.rotation.x += 0.005;
        fullscreenControls.update();
        fullscreenRenderer.render(fullscreenScene, fullscreenCamera);
      }
      animateFullscreen();
    }

    function closeFullscreen() {
      document.getElementById("fullscreenModal").style.display = "none";
      document.getElementById("fullscreenContainer").innerHTML = "";
    }

    window.addEventListener("resize", () => {
      if(fullscreenRenderer){
        fullscreenCamera.aspect = window.innerWidth/window.innerHeight;
        fullscreenCamera.updateProjectionMatrix();
        fullscreenRenderer.setSize(window.innerWidth * 0.9, window.innerHeight * 0.65);
      }
    });
  </script>
</body>
</html>
